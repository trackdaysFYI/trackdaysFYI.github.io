var Calendar=function(e,t,n){for(var a in this.Options={Color:"",LinkColor:"",NavShow:!0,NavVertical:!1,NavLocation:"",DateTimeShow:!0,DateTimeFormat:"mmm, yyyy",DatetimeLocation:"",EventClick:"",EventTargetWholeDay:!1,DisabledDays:[],ModelChange:e},t)this.Options[a]="string"==typeof t[a]?t[a].toLowerCase():t[a];this.Model=e||{},this.Today=new Date,this.Selected=this.Today,this.Today.Month=this.Today.getMonth(),this.Today.Year=this.Today.getFullYear(),n&&(this.Selected=n),this.Selected.Month=this.Selected.getMonth(),this.Selected.Year=this.Selected.getFullYear(),this.Selected.Days=new Date(this.Selected.Year,this.Selected.Month+1,0).getDate(),this.Selected.FirstDay=new Date(this.Selected.Year,this.Selected.Month,1).getDay(),this.Selected.LastDay=new Date(this.Selected.Year,this.Selected.Month+1,0).getDay(),this.Prev=new Date(this.Selected.Year,this.Selected.Month-1,1),0==this.Selected.Month&&(this.Prev=new Date(this.Selected.Year-1,11,1)),this.Prev.Days=new Date(this.Prev.getFullYear(),this.Prev.getMonth()+1,0).getDate()};function createCalendar(t,n,e){if(void 0!==e){e=new Date(t.Selected.Year,t.Selected.Month+e,1);t=new Calendar(t.Model,t.Options,e),n.innerHTML=""}else for(var a in t.Options)"function"!=typeof t.Options[a]&&"object"!=typeof t.Options[a]&&t.Options[a]&&(n.className+=" "+a+"-"+t.Options[a]);var l=["January","February","March","April","May","June","July","August","September","October","November","December"];var i,e=document.createElement("div");if(e.className+="cld-main",t.Options.Color&&(e.innerHTML+="<style>.cld-main{color:"+t.Options.Color+";}</style>"),t.Options.LinkColor&&(e.innerHTML+="<style>.cld-title a{color:"+t.Options.LinkColor+";}</style>"),n.appendChild(e),t.Options.NavShow&&t.Options.NavVertical){var d=document.createElement("div"),o=(d.className+="cld-sidebar",document.createElement("ul"));o.className+="cld-monthList";for(var c=0;c<l.length-3;c++){var s,r=document.createElement("li"),p=(r.className+="cld-month",c-(4-t.Selected.Month));p<0?p+=12:11<p&&(p-=12),0==c?(r.className+=" cld-rwd cld-nav",r.addEventListener("click",function(){"function"==typeof t.Options.ModelChange?t.Model=t.Options.ModelChange():t.Model=t.Options.ModelChange,createCalendar(t,n,-1)}),r.innerHTML+='<svg height="15" width="15" viewBox="0 0 100 75" fill="rgba(255,255,255,0.5)"><polyline points="0,75 100,75 50,0"></polyline></svg>'):c==l.length-4?(r.className+=" cld-fwd cld-nav",r.addEventListener("click",function(){"function"==typeof t.Options.ModelChange?t.Model=t.Options.ModelChange():t.Model=t.Options.ModelChange,createCalendar(t,n,1)}),r.innerHTML+='<svg height="15" width="15" viewBox="0 0 100 75" fill="rgba(255,255,255,0.5)"><polyline points="0,0 100,0 50,75"></polyline></svg>'):(r.className+=c<4?" cld-pre":4<c?" cld-post":" cld-curr",function(){var e=c-4;r.addEventListener("click",function(){"function"==typeof t.Options.ModelChange?t.Model=t.Options.ModelChange():t.Model=t.Options.ModelChange,createCalendar(t,n,e)}),r.setAttribute("style","opacity:"+(1-Math.abs(e)/4)),r.innerHTML+=l[p].substr(0,3)}(),0==p&&((s=document.createElement("li")).className+="cld-year",s.innerHTML+=c<5?t.Selected.Year:t.Selected.Year+1,o.appendChild(s))),o.appendChild(r)}d.appendChild(o),(t.Options.NavLocation?(document.getElementById(t.Options.NavLocation).innerHTML="",document.getElementById(t.Options.NavLocation)):n).appendChild(d)}t.Options.DateTimeShow&&((d=document.createElement("div")).className+="cld-datetime",t.Options.NavShow&&!t.Options.NavVertical&&((i=document.createElement("div")).className+=" cld-rwd cld-nav",i.addEventListener("click",function(){createCalendar(t,n,-1)}),i.innerHTML='<svg height="15" width="15" viewBox="0 0 75 100" fill="rgba(0,0,0,0.5)"><polyline points="0,50 75,0 75,100"></polyline></svg>',d.appendChild(i)),(i=document.createElement("div")).className+=" today",i.innerHTML=l[t.Selected.Month]+" "+t.Selected.Year,d.appendChild(i),t.Options.NavShow&&!t.Options.NavVertical&&((i=document.createElement("div")).className+=" cld-fwd cld-nav",i.addEventListener("click",function(){createCalendar(t,n,1)}),i.innerHTML='<svg height="15" width="15" viewBox="0 0 75 100" fill="rgba(0,0,0,0.5)"><polyline points="0,0 75,50 0,100"></polyline></svg>',d.appendChild(i)),(t.Options.DatetimeLocation?(document.getElementById(t.Options.DatetimeLocation).innerHTML="",document.getElementById(t.Options.DatetimeLocation)):e).appendChild(d));for(var h=document.createElement("ul"),m=(h.className="cld-labels",["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),v=0;v<m.length;v++){var y=document.createElement("li");y.className+="cld-label",y.innerHTML=m[v],h.appendChild(y)}function M(e){var t=document.createElement("p");return t.className+="cld-number",t.innerHTML+=e,t}e.appendChild(h);var u=document.createElement("ul");u.className+="cld-days";for(var g=0;g<t.Selected.FirstDay;g++){(T=document.createElement("li")).className+="cld-day prevMonth";for(var C=g%7,D=0;D<t.Options.DisabledDays.length;D++)C==t.Options.DisabledDays[D]&&(T.className+=" disableDay");var O=M(t.Prev.Days-t.Selected.FirstDay+(g+1));T.appendChild(O),u.appendChild(T)}for(g=0;g<t.Selected.Days;g++){for(C=((T=document.createElement("li")).className+="cld-day currMonth",(g+t.Selected.FirstDay)%7),D=0;D<t.Options.DisabledDays.length;D++)C==t.Options.DisabledDays[D]&&(T.className+=" disableDay");for(var O=M(g+1),L=0;L<t.Model.length;L++){var E,S=t.Model[L].Date,f=new Date(t.Selected.Year,t.Selected.Month,g+1);S.getTime()==f.getTime()&&(O.className+=" eventday",(S=document.createElement("span")).className+="cld-title","function"==typeof t.Model[L].Link||t.Options.EventClick?((f=document.createElement("a")).setAttribute("href","#"),f.innerHTML+=t.Model[L].Title,t.Options.EventClick?(E=t.Model[L].Link,"string"!=typeof t.Model[L].Link?(f.addEventListener("click",t.Options.EventClick.bind.apply(t.Options.EventClick,[null].concat(E))),t.Options.EventTargetWholeDay&&(T.className+=" clickable",T.addEventListener("click",t.Options.EventClick.bind.apply(t.Options.EventClick,[null].concat(E))))):(f.addEventListener("click",t.Options.EventClick.bind(null,E)),t.Options.EventTargetWholeDay&&(T.className+=" clickable",T.addEventListener("click",t.Options.EventClick.bind(null,E))))):(f.addEventListener("click",t.Model[L].Link),t.Options.EventTargetWholeDay&&(T.className+=" clickable",T.addEventListener("click",t.Model[L].Link))),S.appendChild(f)):S.innerHTML+='<a target="_blank" href="'+t.Model[L].Link+'">'+t.Model[L].Title+"</a>",O.appendChild(S))}T.appendChild(O),g+1==t.Today.getDate()&&t.Selected.Month==t.Today.Month&&t.Selected.Year==t.Today.Year&&(T.className+=" today"),u.appendChild(T)}var N=13;for(35<u.children.length?N=6:u.children.length<29&&(N=20),g=0;g<N-t.Selected.LastDay;g++){(T=document.createElement("li")).className+="cld-day nextMonth";for(var T,C=(g+t.Selected.LastDay+1)%7,D=0;D<t.Options.DisabledDays.length;D++)C==t.Options.DisabledDays[D]&&(T.className+=" disableDay");O=M(g+1);T.appendChild(O),u.appendChild(T)}e.appendChild(u)}function caleandar(e,t,n,a){createCalendar(new Calendar(t,n,a),e)}